(()=>{var E=class{__id="";_props={};$_callbacks={};_refs={};_slots={};_element=null;$$t=[];$$r={};$$p=[];$;_name="BaseComponent";emitEvent(e,n){e in this.$_callbacks&&this.$_callbacks[e](n)}};var ie=class extends E{_name="MenuBar"};var P={componentsPath:"/viewi-default/viewi.json",publicPath:"/viewi-default/",name:"default",minify:!1,combine:!1,appendVersion:!1,build:"bBLgTcpg",version:"2.0.0"};var q=window.ViewiApp?window.ViewiApp[P.name].register:{};var Et=q.Platform,se=class{config=null;platform=null;constructor(e){var n=this;n.platform=e,n.config=e.getConfig()}getAll(){var e=this;return e.config}get(e){var n=this;return n.config[e]??null}isServer(){var e=this;return e.platform.server}isBrowser(){var e=this;return e.platform.browser}};function le(t,e){let n="",o="",i="";if(arguments.length===1&&(e=t,t=""),typeof e=="object"){if(Object.prototype.toString.call(e)==="[object Array]")return e.join(t);for(n in e)o+=i+e[n],i=t;return o}return e}var Vt=q.HttpClient,ae=class extends E{_name="CssBundle";config=null;http=null;constructor(e,n){super();var o=this;e=typeof e<"u"?e:null,n=typeof n<"u"?n:null,o.config=e,o.http=n}links=[];minify=!1;combine=!1;inline=!1;purge=!1;cssHtml="<!--- CssBundle not initiated --->";mounted(){var e=this,n=e.config.get("assetsUrl");if(e.combine){var o=e.config.get("cssBundle"),i=e.version();if(!(i in o))throw new Exception("Css bundle not found");var r=n+o[i];if(e.inline){e.cssHtml='<style data-keep="'+i+'"> /** loading '+r+" **/ </style>",e.http.get(r).then(function(p){e.cssHtml='<style data-keep="'+i+'">'+p+"</style>"},function(){e.cssHtml='<style data-keep="'+i+'"> /** Error loading '+r+" **/ </style>"});return}e.cssHtml='<link rel="stylesheet" href="'+r+'">'}else{var l="";for(var a in e.links){var c=e.links[a];r=n+c,l+='<link rel="stylesheet" href="'+r+'">',e.cssHtml=l}}}version(){var e=this,n=le("|",e.links);return n+=e.minify?"1":"0",n+=e.inline?"1":"0",n+=e.purge?"1":"0",n+=e.combine?"1":"0",n}},Be=[function(t){return t.cssHtml}];var ce=class extends E{_name="ViewiAssets";appPath="";data='<script data-keep="ViewiAssets">"ViewiAssets";<\/script>'},He=[function(t){return t.data},function(t){return t.appPath}];var me=class extends E{_name="Layout";title="Viewi";assetsUrl="/";constructor(e){super();var n=this;n.assetsUrl=e.get("assetsUrl")}},_e=[function(t){return`
        `+(t.title??"")+` | Viewi
    `},function(t){return["/mui.css","/app.css"]}];var pe=class extends E{_name="HomePage";title="Viewi - Reactive application for PHP"},Pe=[function(t){return t.title},function(t){return t.title}];var ue=class extends E{_name="NotFoundPage"};var V={MenuBar:ie,HomePage_x:Pe,HomePage:pe,Layout_x:_e,Layout:me,NotFoundPage:ue,CssBundle_x:Be,CssBundle:ae,ViewiAssets_x:He,ViewiAssets:ce,ConfigService:se},Re="{}";var Le={implode:le};var fe=class{method;url;action;wheres;defaults=null;constructor(e,n,o,i=null,r){this.method=e,this.url=n,this.action=o,this.wheres={},this.defaults=i,r&&(this.wheres=r)}where(e,n){return e!==null&&typeof e=="object"?this.wheres=Object.assign(this.where,e):n&&(this.wheres[e]=n),this}};var de=class{routes;trimExpr=/^\/|\/$/g;setRoutes(e){this.routes=e}getRoutes(){return this.routes}register(e,n,o,i=null,r){let l=new fe(e.toLowerCase(),n,o,i,r);return this.routes.push(l),l}get(e,n){return this.register("get",e,n)}resolve(e){e=e.replace(this.trimExpr,"");let n=e.split("/");for(let o in this.routes){let i={},r=!0,l=this.routes[o],c=l.url.replace(this.trimExpr,"").split("/"),p=0,s=!1;for(p;p<c.length;p++){let u=c[p];if(u.indexOf("*")!==-1){let v=u.slice(0,-1);if(!v||n[p].indexOf(v)===0){s=!0;break}}let x=u.indexOf("{")!==-1;if(u!==n[p]&&!x){r=!1;break}if(x){let v=u.split(/[{}]+/),m=v[1];if(m[m.length-1]==="?")m=m.slice(0,-1);else if(p>=n.length){r=!1;break}if(m.indexOf("<")!==-1){let d=/<([^>]+)>/.exec(m);d&&(m=m.replace(/<([^>]+)>/g,""),l.wheres[m]=d[1])}if(l.wheres[m]){let d=new RegExp(l.wheres[m],"g");if(!d.test(n[p])){r=!1;break}d.lastIndex=0,d.test("/")&&(s=!0)}let g=p<n.length?n[p]:null;if(g&&v[0])if(g.indexOf(v[0])!==0){r=!1;break}else g=g.slice(v[0].length);if(i[m]=g,s){i[m]=n.slice(p).join("/");break}}}if(p<n.length&&!s&&(r=!1),r)return{item:l,params:i}}return null}};var A={list:{},config:{},booleanAttributes:{},router:new de};var he={},ge={postpone:function(t,e){he[t]=e},ready:function(t){if(!(t in he))throw new Error("There is no postponed action for "+t);he[t](),delete he[t]}};var S={hydrate:!0,rootScope:!1,scopedContainer:{},located:{},iteration:{},lastIteration:{},layout:"",cancel:!1};var Y={};function ye(){return window.viewiScopeState??{http:{},state:{}}}var Se={};function be(t,e,n){q[t]=e,V[t]=e,Se[t]=n}var ut={},ft=0;function W(t,e={},n=!1){if(!(t in A.list)){if(n)return null;throw new Error("Can't resolve "+t)}let o=A.list[t],i=null,r=!1;if(o.di==="Singleton"?r=ut:o.di==="Scoped"&&(r=S.scopedContainer),r&&t in r)return r[t];if(o.custom)i=Se[t]();else if(!o.dependencies)i=new V[t];else{let c=[];for(let p in o.dependencies){let s=o.dependencies[p],u=!!s.null;var l=null;e&&s.argName in e?l=e[s.argName]:s.default?l=s.default:s.builtIn?l=s.name==="string"?"":0:l=W(s.name,{},u),c.push(l)}i=new V[t](...c)}o.base&&(i.__id=++ft+"");let a=ye();if(a.state[t])for(let c in a.state[t])i[c]=a.state[t][c];return r&&(r[t]=i),i}function De(t){let e=document.head,n=document.createElement("script");n.type="text/javascript",n.src=t,e.appendChild(n)}function J(t){if(!t.keep){for(let e in t.track){let n=t.track[e];delete t.instance.$$r[n.path][n.id]}if(t.track=[],t.children){for(let e in t.children)J(t.children[e]);t.children={}}if(t.main){for(let n=0;n<t.instance.$$p.length;n++){let o=t.instance.$$p[n];delete o[1].$$r[o[0]]}let e=t.instance;e.destroy&&e.destroy()}t.parent&&(delete t.parent.children[t.id],delete t.parent)}}function Ve(t,e){return function(n){e(t,n)}}var Oe={_props:!0,$_callbacks:!0,_refs:!0,_slots:!0,_element:!0,$$t:!0,$$r:!0,$:!0,_name:!0,emitEvent:!0};var dt=0;function ht(t,e,n){let o=t.$??t;return o.$||(Object.defineProperty(o,"$",{enumerable:!1,writable:!0,value:o}),Object.defineProperty(o,"$$r",{enumerable:!1,writable:!0,value:{}})),new Proxy(o,{set(r,l,a){let c=r[l]!==a,p=Reflect.set(r,l,a);if(c)for(let s in r.$$r){let u=r.$$r[s][0],y=r.$$r[s][1];if(u in y.$$r)for(let x in y.$$r[u]){let v=y.$$r[u][x];v[0].apply(null,v[1])}}return p}})}function je(t,e,n){if(!(t in Oe)&&n!==null&&typeof n=="object"&&!Array.isArray(n)){let o=ht(n,e,t);e[t]=o;let i=++dt+"";o.$$r[i]=[t,e],e.$$p.push([i,o])}}function Fe(t){let e=Object.keys(t);for(let o=0;o<e.length;o++){let i=e[o],r=t[i];je(i,t,r)}let n=new Proxy(t,{set(o,i,r){let l=o[i]!==r,a=Reflect.set(o,i,r);if(je(i,t,r),l&&i in o.$$r)for(let c in o.$$r[i]){let p=o.$$r[i][c];p[0].apply(null,p[1])}return a}});return t.$=t,n}var gt=0;function M(t){return t.__aid||(t.__aid=++gt,Y[t.__aid]={current:-1,target:t,invalid:[],added:0}),Y[t.__aid]}function Ue(t,e){let n=M(t),o=t.childNodes.length,i=n.current+3;i=i>o?o:i;let r=[];for(let a=n.current+1;a<i;a++){let c=t.childNodes[a];if(c.nodeType===8)return n.current=a,n.invalid=n.invalid.concat(r),c;r.push(a)}n.added++,n.invalid=n.invalid.concat(r),console.log("Hydrate comment not found",e);let l=document.createComment(e);return n.current=n.current+r.length+1,o>n.current?t.insertBefore(l,t.childNodes[n.current]):t.appendChild(l)}var yt={body:!0,head:!0,html:!0};function qe(t,e){let n=M(t),o=t.childNodes.length,i=n.current+3;i=i>o?o:i;let r=[];for(let a=n.current+1;a<i;a++){let c=t.childNodes[a];if(c.nodeType===1&&c.nodeName.toLowerCase()===e.toLowerCase())return n.current=a,n.invalid=n.invalid.concat(r),c;r.push(a)}if(e in yt){let a=document.getElementsByTagName(e);if(a.length>0)return n.invalid=[],a[0]}n.added++,n.invalid=n.invalid.concat(r),console.warn("Hydrate not found",e);let l=document.createElement(e);return n.current=n.current+r.length+1,o>n.current?t.insertBefore(l,t.childNodes[n.current]):t.appendChild(l)}function Z(t,e,n,o){let i=[t];o.arguments&&(i=i.concat(o.arguments));let r=(e.expression?t.$$t[e.code].apply(null,i):e.content)??"";n.nodeValue!==r&&(n.nodeValue=r)}function Je(t,e,n,o){let i=M(t),r=t.childNodes.length,l=i.current+3;l=l>r?r:l;let a=[],c=i.current>-1?i.current:i.current+1;for(let s=c;s<l;s++){let u=t.childNodes[s];if(u.nodeType===3){if(s===i.current)break;return i.current=s,i.invalid=i.invalid.concat(a),Z(e,n,u,o),u}s!==i.current&&a.push(s)}i.added++,i.invalid=i.invalid.concat(a);let p=document.createTextNode("");return Z(e,n,p,o),i.current=i.current+a.length+1,r>i.current?t.insertBefore(p,t.childNodes[i.current]):t.appendChild(p)}function ee(t,e,n,o,i){let r=null;if(e.children){r="";for(let l=0;l<e.children.length;l++){let a=e.children[l],c=[t];i.arguments&&(c=c.concat(i.arguments));let p=a.expression?t.$$t[a.code].apply(null,c):a.content??"";r=l===0?p:r+(p??"")}}o.toLowerCase()in A.booleanAttributes?r===!0||r===null?o!==n.getAttribute(o)&&n.setAttribute(o,o):n.removeAttribute(o):r!==null?r!==n.getAttribute(o)&&n.setAttribute(o,r):n.removeAttribute(o)}var Ke=0;function xe(){return++Ke}function $(t,e=!1,n,o){let i=document.createTextNode("");return i._anchor=o??"#"+ ++Ke,n&&n.current++,e||n&&t.childNodes.length>n.current?(n?t:t.parentElement).insertBefore(i,n?t.childNodes[n.current]:t):t.appendChild(i),i}function ze(t,e,n,o,i,r,l){let a=[t];l.arguments&&(a=a.concat(l.arguments));let c=t.$$t[n.children[0].forData].apply(null,a),p=Array.isArray(c),s=o,u=!1,y={},x={};for(let v in c){let m=p?+v:v,g=c[m],d=++l.counter,f={id:d,why:"forItem",instance:t,arguments:[...l.arguments],map:{...l.map},track:[],parent:l,children:{},counter:0};l.refs&&(f.refs=l.refs),l.children[d]=f;let T=!1;for(let k in i)if(i[k]===g){T=!0,u=!1,s=o;break}else!u&&!(m in y)&&(s=i[k].begin,u=!0);if(y[m]=!0,!T){f.map[n.children[0].forKey]=f.arguments.length,f.arguments.push(m),f.map[n.children[0].forItem]=f.arguments.length,f.arguments.push(g);let k={map:{...r.map},storage:{...r.storage}},h=$(s,!0,void 0,"b"+xe());B(s,t,[e],f,k,!1,!0);let C=$(s,!0,void 0,h._anchor);m in i&&(x[m]=i[m]),i[m]={key:m,value:g,begin:h,end:C,scope:f}}}for(let v in i)if(!(v in y)){let m=i[v].end;for(;m.previousSibling._anchor!==m._anchor;)m.previousSibling.remove();i[v].begin.remove(),m.remove(),J(i[v].scope),delete i[v]}for(let v in x){let m=x[v].end;for(;m.previousSibling._anchor!==m._anchor;)m.previousSibling.remove();x[v].begin.remove(),J(x[v].scope),m.remove()}}function ve(t,e,n,o,i,r,l){let a=!0;for(let s=0;s<l;s++)a=a&&!i.values[s];o.children&&(a=a&&!!t.$$t[o.children[0].code](t));let c=n.anchorNode,p={map:{...r.map},storage:{...r.storage}};if(i.values[l]!==a){let s=n.scope.parent;if(i.values[l]=a,a){let u=++s.counter,y={id:u,why:l===0?"if":o.children?"elseif":"else",instance:t,arguments:[...s.arguments],map:{...s.map},track:[],parent:s,children:{},counter:0};s.refs&&(y.refs=s.refs),n.scope=y,s.children[u]=y,B(c,t,[e],y,p,!1,!0)}else for(J(n.scope),n.scope={id:-1,why:"if",instance:t,arguments:[],map:{},track:[],parent:s,children:{},counter:0};c.previousSibling._anchor!==c._anchor;)c.previousSibling.remove()}}function Ge(t,e,n){let o=e.expression?t.$$t[e.code](t):e.content??"";n.nodeValue!==o&&(n.nodeValue=o)}var xt=0;function R(t,e,n,o){t.$$r[e]||(t.$$r[e]={});let i=++xt;n.track.push({id:i,path:e}),t.$$r[e][i]=o}function K(t){let e="value";switch(t.t){case"t":{e="tag";break}case"a":{e="attr";break}case void 0:case"v":{e="value";break}case"c":{e="component";break}case"x":{e="text";break}case"m":{e="comment";break}case"d":{e="doctype";break}case"r":{e="root",t.h&&t.h[0].t==="x"&&t.h[0].c?.substring(0,9)==="<!DOCTYPE"&&(t.h[0].t="d");break}default:throw new Error("Type "+t.t+" is not defined in build")}if(t.type=e,delete t.t,t.c&&(t.content=t.c,delete t.c),t.e&&(t.expression=t.e,delete t.e),t.a){t.attributes=t.a,delete t.a;for(let n in t.attributes)K(t.attributes[n])}if(t.i){t.directives=t.i,delete t.i;for(let n in t.directives)K(t.directives[n])}if(t.h){t.children=t.h,delete t.h;for(let n in t.children)K(t.children[n])}}function Ce(t){return t in A.list}function Qe(t,e,n){let o=e.expression?t.$$t[e.code](t):e.content??"",i=e.type==="component"||e.expression&&Ce(o),r=n.anchorNode,l=n.scope.parent;for(J(n.scope);r.previousSibling._anchor!==r._anchor;)r.previousSibling.remove();let a=++l.counter,c={id:a,why:"dynamic",arguments:[...l.arguments],map:{...l.map},track:[],instance:t,parent:l,children:{},counter:0};if(l.refs&&(c.refs=l.refs),n.scope=c,l.children[a]=c,i){let p={};if(e.slots){let u={id:++c.counter,why:"slot",arguments:[...l.arguments],map:{...l.map},track:[],instance:t,parent:c,children:{},counter:0,slots:l.slots};for(let y in e.slots)p[y]={node:e.slots[y],scope:u}}te(r,o,{attributes:e.attributes,scope:l,instance:t},p,!1,!0);return}else{let p=r.parentElement.insertBefore(document.createElement(o),r);if(e.attributes)for(let s in e.attributes){let u=e.attributes[s],y=u.expression?t.$$t[u.code](t):u.content??"";if(y[0]==="("){let x=y.substring(1,y.length-1);if(u.children){let v=t.$$t[u.dynamic?u.dynamic.code:u.children[0].code](t);p.addEventListener(x,v)}}else{ee(t,u,p,y,c);let x=[];if(u.children)for(let v in u.children){let m=u.children[v];m.subs&&(x=x.concat(m.subs))}if(x)for(let v in x){let m=x[v];R(t,m,c,[ee,[t,u,p,y,c]])}}}e.children&&B(p,t,e.children,c,void 0,!1,!1)}}function We(t,e,n,o){for(;o.previousSibling._anchor!==o._anchor;)o.previousSibling.remove();let i=o.parentElement,r=document.createElement(i.nodeName),l=[t];n.arguments&&(l=l.concat(n.arguments));let a=(e.expression?t.$$t[e.code].apply(null,l):e.content)??"";r.innerHTML=a;let c=Array.prototype.slice.call(r.childNodes);for(let p=0;p<c.length;p++){let s=c[p];i.insertBefore(s,o)}}function Xe(t,e){return function(n){if(e.inputType==="checkbox"){let o=e.getter(t),i=n.target.value;if(Array.isArray(o)){let r=o.slice(),l=r.indexOf(i);l===-1?n.target.checked&&r.push(i):n.target.checked||r.splice(l,1),e.setter(t,r)}else e.setter(t,n.target.checked)}else if(e.inputType==="radio"){let o=n.target.value;e.setter(t,o)}else if(e.isMultiple||n.target.multiple){let o=n.target.options,i=[];for(let r=0;r<o.length;r++){let l=o[r];l.selected&&i.push(l.value)}e.setter(t,i)}else e.setter(t,n.target.value)}}function Ae(t,e,n){if(n.inputType==="checkbox"){let o=n.getter(e);if(Array.isArray(o)){let i=t.value;o.indexOf(i)===-1?(t.removeAttribute("checked"),t.checked=!1):(t.setAttribute("checked","checked"),t.checked=!0)}else o?(t.setAttribute("checked","checked"),t.checked=!0):(t.removeAttribute("checked"),t.checked=!1)}else if(n.inputType==="radio"){let o=n.getter(e),i=t.value;o===i?(t.setAttribute("checked","checked"),t.checked=!0):(t.removeAttribute("checked"),t.checked=!1)}else if(n.isMultiple||t.multiple){let o=t.options,i=n.getter(e);for(let r=0;r<o.length;r++){let l=o[r];i.indexOf(l.value)===-1?l.selected=!1:l.selected=!0}}else t.value=n.getter(e)}var Ze={},vt="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Ye=vt.split(",");for(let t=0;t<Ye.length;t++)Ze[Ye[t]]=!0;function et(t){return t.toLowerCase()in Ze}var $e="http://www.w3.org/2000/svg";function tt(t,e,n){if(t.childNodes.length>0){let o=[],i=Array.prototype.slice.call(t.childNodes);for(let r=0;r<i.length;r++){let l=i[r],a=l.nodeType;if(a===3){let c=n.childNodes[e.current];c&&c.nodeType===a?c.nodeValue=l.nodeValue:(e.added++,n.childNodes.length>e.current&&o.push(e.current),n.childNodes.length>e.current+1?n.insertBefore(l,n.childNodes[e.current+1]):n.appendChild(l),e.current++)}else{let c=n.childNodes[e.current];if(!c||c.nodeType!==a||a===1&&c.nodeName!==l.nodeName)e.added++,n.childNodes.length>e.current&&o.push(e.current),n.childNodes.length>e.current+1?n.insertBefore(l,n.childNodes[e.current+1]):n.appendChild(l),e.current++;else if(a===1&&(c.nodeName!==l.nodeName||c.outerHTML!==l.outerHTML)){let p=c.getAttribute("data-keep");(!p||p!==l.getAttribute("data-keep"))&&(c.outerHTML=l.outerHTML)}}e.current++}o.length>0&&(e.invalid=e.invalid.concat(o))}}function B(t,e,n,o,i,r=!0,l=!1){let a=null,c=!1;for(let p=0;p<n.length;p++){let s=n[p],u=t,y=!1,x=!1,v=o;switch(s.type){case"tag":case"component":{if(s.directives){let h=i||{map:{},storage:{}},C=[e];o.arguments&&(C=C.concat(o.arguments));for(let N=0;N<s.directives.length;N++){let b=s.directives[N];if(!(N in h.map)){switch(h.map[N]=!0,b.content){case"if":{a={values:[],index:0,subs:[]};let w=!!e.$$t[b.children[0].code].apply(null,C);a.values.push(w);let H=r?M(t):void 0,O=$(t,l,H),G={map:{...h.map},storage:{...h.storage}},D=++o.counter,_={id:D,why:"if",arguments:o.arguments,map:o.map,instance:e,track:[],parent:o,children:{},counter:0};o.refs&&(_.refs=o.refs),o.children[D]=_,w&&B(t,e,[s],_,h,r,l);let F=$(t,l,H,O._anchor);if(b.children[0].subs)for(let I in b.children[0].subs){let j=b.children[0].subs[I];a.subs.push(j),R(e,j,o,[ve,[e,s,{scope:_,anchorNode:F},b,a,G,a.index]])}a.index++,y=!0;break}case"else-if":{if(a){let w=!0;for(let I=0;I<a.index;I++)w=w&&!a.values[I];w=w&&!a.values[a.index-1]&&!!e.$$t[b.children[0].code].apply(null,C),a.values.push(w);let H=r?M(t):void 0,O=$(t,l,H),G={map:{...h.map},storage:{...h.storage}},D=++o.counter,_={id:D,why:"elseif",instance:e,arguments:o.arguments,map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(_.refs=o.refs),o.children[D]=_,w&&B(t,e,[s],_,h,r,l);let F=$(t,l,H,O._anchor);b.children[0].subs&&(a.subs=a.subs.concat(b.children[0].subs));for(let I in a.subs){let j=a.subs[I];R(e,j,o,[ve,[e,s,{scope:_,anchorNode:F},b,a,G,a.index]])}a.index++,y=!0}else console.warn("Directive else-if has missing previous if/else-if",b.content,b);break}case"else":{if(a){let w=!0;for(let I=0;I<a.index;I++)w=w&&!a.values[I];a.values.push(w);let H=r?M(t):void 0,O=$(t,l,H),G={map:{...h.map},storage:{...h.storage}},D=++o.counter,_={id:D,why:"else",instance:e,arguments:o.arguments,map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(_.refs=o.refs),o.children[D]=_,w&&B(t,e,[s],_,h,r,l);let F=$(t,l,H,O._anchor);for(let I in a.subs){let j=a.subs[I];R(e,j,o,[ve,[e,s,{scope:_,anchorNode:F},b,a,G,a.index]])}a.index++,y=!0}else console.warn("Directive else has missing previous if/else-if",b.content,b);break}case"foreach":{let w=e.$$t[b.children[0].forData].apply(null,C),H=r?M(t):void 0,O=$(t,l,H),G=Array.isArray(w),D={};for(let F in w){let I=G?+F:F,j=w[I],Me=++o.counter,U={id:Me,why:"foreach",instance:e,arguments:[...o.arguments],map:{...o.map},track:[],parent:o,children:{},counter:0};o.refs&&(U.refs=o.refs),o.children[Me]=U,U.map[b.children[0].forKey]=U.arguments.length,U.arguments.push(I),U.map[b.children[0].forItem]=U.arguments.length,U.arguments.push(j);let mt={map:{...h.map},storage:{...h.storage}},Ee=$(t,l,H,"b"+xe());B(t,e,[s],U,mt,r,l);let pt=$(t,l,H,Ee._anchor);D[I]={key:I,value:j,begin:Ee,end:pt,scope:U}}let _=$(t,l,H,O._anchor);if(b.children[0].subs)for(let F in b.children[0].subs){let I=b.children[0].subs[F],j={map:{...h.map},storage:{...h.storage}};R(e,I,o,[ze,[e,s,b,_,D,j,o]])}y=!0;break}default:{console.warn("Directive not implemented",b.content,b),y=!0;break}}if(y)break}}if(y)continue}let m=s.expression?e.$$t[s.code](e):s.content??"",g=s.expression,d=s.type==="component"||s.expression&&Ce(m),f,T,k=o;if(g&&(f=r?M(t):void 0,T=$(t,l,f)),g){let h=++o.counter;k={id:h,why:"dynamic",arguments:[...o.arguments],map:{...o.map},track:[],instance:e,parent:o,children:{},counter:0},o.refs&&(k.refs=o.refs),o.children[h]=k,v=k}if(d){let h={};if(s.slots){let C=++k.counter,N={id:C,why:"slot",arguments:[...o.arguments],map:{...o.map},track:[],parent:k,instance:e,children:{},counter:0,slots:o.slots};o.refs&&(N.refs=o.refs),k.children[C]=N;for(let b in s.slots)h[b]={node:s.slots[b],scope:N}}te(t,m,{attributes:s.attributes,scope:o},h,r,l)}else{if(s.content==="template"){c=l;break}if(s.content==="slot"){f||(f=r?M(t):void 0),c=l;let C="default";if(s.attributes)for(let w in s.attributes)s.attributes[w].content==="name"&&(C=s.attributes[w].children[0].content);let N=$(t,l,f);if(C in o.slots){let w=o.slots[C];w.node.unpacked||(K(w.node),w.node.unpacked=!0),B(u,w.scope.instance,w.node.children,w.scope,void 0,r,c)}else s.children&&B(u,e,s.children,o,void 0,r,c);let b=$(t,l,f,N._anchor);o.instance._name in S.iteration&&(S.iteration[o.instance._name].slots[C]=b);continue}x=!0;let h=et(m)||t.isSvg;u=r?qe(t,m):l?t.parentElement.insertBefore(h?document.createElementNS($e,m):document.createElement(m),t):t.appendChild(h?document.createElementNS($e,m):document.createElement(m)),s.first&&(e._element=u),h&&(u.isSvg=!0)}if(g){let h=$(t,l,f,T._anchor);if(s.subs)for(let C in s.subs){let N=s.subs[C];R(e,N,o,[Qe,[e,s,{scope:k,anchorNode:h}]])}}if(d)continue;break}case"text":{if(s.raw){let g=l?t.parentElement:t,d=document.createElement(g.nodeName),f=[e];o.arguments&&(f=f.concat(o.arguments));let T=(s.expression?e.$$t[s.code].apply(null,f):s.content)??"";d.innerHTML=T;let k=r?M(t):void 0,h=$(t,l,k);if(r)k.current++,tt(d,k,t);else if(d.childNodes.length>0){let N=Array.prototype.slice.call(d.childNodes);for(let b=0;b<N.length;b++){let w=N[b];l?t.parentElement.insertBefore(w,t):t.appendChild(w)}}let C=$(t,l,k,h._anchor);if(s.subs)for(let N in s.subs){let b=s.subs[N];R(e,b,o,[We,[e,s,o,C]])}break}let m;if(r?m=Je(t,e,s,o):(m=document.createTextNode(""),Z(e,s,m,o),l?t.parentElement.insertBefore(m,t):t.appendChild(m)),s.subs)for(let g in s.subs){let d=s.subs[g];R(e,d,o,[Z,[e,s,m,o]])}break}case"comment":{let m=s.expression?e.$$t[s.code](e):s.content??"",g=r?Ue(t,m):l?t.parentElement.insertBefore(document.createComment(m),t):t.appendChild(document.createComment(m));if(s.subs)for(let d in s.subs){let f=s.subs[d];R(e,f,o,[Ge,[e,s,g]])}break}case"doctype":{if(r){let m=M(t);m.current++}break}default:{console.warn("Node type not implemented",s);break}}if(x){if(s.attributes){let m=r?u.getAttributeNames():null,g=r?{}:null;for(let d=0;d<s.attributes.length;d++){let f=s.attributes[d],T=f.expression?e.$$t[f.code](e):f.content??"";if(T[0]==="#"){let h=T.substring(1,T.length);e._refs[h]=u,o.refs&&h in o.refs&&(e[h]=u);continue}let k=T==="model";if(T[0]==="("){let h=T.substring(1,T.length-1);if(f.children){let C=e.$$t[f.dynamic?f.dynamic.code:f.children[0].code](e);u.addEventListener(h,C)}}else if(k){let h="text";u.getAttribute("type")==="checkbox"&&(h="checkbox"),u.getAttribute("type")==="radio"&&(h="radio");let C=!1;u.tagName==="SELECT"&&(h="select",C=u.multiple);let N=h==="checkbox"||h==="radio"||h==="select",b=f.children[0],w=e.$$t[b.code](e),H=N?"change":"input",O={getter:w[0],setter:w[1],inputType:h,isMultiple:C};Ae(u,e,O);for(let G in b.subs){let D=b.subs[G];R(e,D,o,[Ae,[u,e,O]])}u.addEventListener(H,Xe(e,O))}else{r&&(g[T]=!0),ee(e,f,u,T,o);let h=[];if(f.children)for(let C in f.children){let N=f.children[C];N.subs&&(h=h.concat(N.subs))}if(h)for(let C in h){let N=h[C];R(e,N,o,[ee,[e,f,u,T,o]])}}}if(r)for(let d=0;d<m.length;d++)m[d]in g||u.removeAttribute(m[d])}else if(r){let m=u.getAttributeNames();for(let g=0;g<m.length;g++)u.removeAttribute(m[g])}}s.children&&B(u,e,s.children,v,void 0,r,c)}}function nt(t,e,n,o){t[e]=n(o)}function ot(t,e,n){let o=n.scope.instance,i=e.expression?o.$$t[e.code](o):e.content??"";if(i[0]!=="("){let r=null,l=[];if(e.children)for(let a=0;a<e.children.length;a++){let c=e.children[a],p=[o];n.scope.arguments&&(p=p.concat(n.scope.arguments));let s=c.expression?o.$$t[c.code].apply(null,p):c.content??"";r=a===0?s:r+(s??""),c.subs&&(l=l.concat(c.subs))}if(i==="_props"&&r)for(let a in r)t[a]=r[a],t._props[a]=r[a];else t[i]=r,t._props[i]=r}}function te(t,e,n,o,i=!1,r=!1,l={}){if(!(e in A.list))throw new Error(`Component ${e} not found.`);if(!(e in V))throw new Error(`Component ${e} not found.`);let a=A.list[e],c=a.nodes,p=S.lastIteration,s=e in p;if(s){let m=p[e].slots;for(let g in m){let d=m[g];for(;d.previousSibling._anchor!==d._anchor;)d.previousSibling.remove()}p[e].scope.keep=!0}let u=s?p[e].instance:Fe(W(e,l));s||a.hooks&&a.hooks.init&&u.init();let y=e+"_x";!s&&y in V&&(u.$$t=V[y]);let x=n?++n.scope.counter:0,v=s?p[e].scope:{id:x,why:e,arguments:n?[...n.scope.arguments]:[],instance:u,main:!0,map:n?{...n.scope.map}:{},track:[],children:{},counter:0,parent:n?n.scope:void 0,slots:o};if(n&&(n.scope.children[x]=v),a.refs&&(v.refs=a.refs),n&&n.attributes){let m=n.scope.instance;for(let g in n.attributes){let d=n.attributes[g],f=d.expression?m.$$t[d.code](m):d.content??"";if(f[0]==="("){let T=f.substring(1,f.length-1);if(d.children){let k=m.$$t[d.dynamic?d.dynamic.code:d.children[0].code](m);u.$_callbacks[T]=k}}else{let T=f==="model",k=null,h=[];if(T){let C=d.children[0],N=[m];n.scope.arguments&&(N=N.concat(n.scope.arguments));let b=m.$$t[C.code].apply(null,N);k=b[0](m),u.$_callbacks[f]=Ve(m,b[1]);for(let w in C.subs){let H=C.subs[w];R(m,H,n.scope,[nt,[u,f,b[0],m]])}}else if(d.children)for(let C=0;C<d.children.length;C++){let N=d.children[C],b=[m];n.scope.arguments&&(b=b.concat(n.scope.arguments));let w=N.expression?m.$$t[N.code].apply(null,b):N.content??"";k=C===0?w:k+(w??""),N.subs&&(h=h.concat(N.subs))}else k=!0;if(f==="_props"&&k)for(let C in k)u[C]=k[C],u._props[C]=k[C];else d.children?.length===1&&d.children[0].content==="false"&&(k=!1),u[f]=k,u._props[f]=k;if(h)for(let C in h){let N=h[C];R(m,N,n.scope,[ot,[u,d,n]])}}}}if(!S.cancel&&a.hooks&&a.hooks.mounted&&u.mounted(),e in S.located&&(S.iteration[e]={instance:u,scope:v,slots:{}}),s){let m=p[e].slots;for(let d in m){let f=m[d];if(f.parentNode&&document.body.contains(f)){if(o&&d in o){let T=o[d];T.node.unpacked||(K(T.node),T.node.unpacked=!0),B(f,T.scope.instance,T.node.children,T.scope,void 0,!1,!0)}S.iteration[e].slots[d]=f}}let g=e;for(;g;){let d=A.list[g];g=!1;let f=d.nodes;if(f){let T=f.children;T&&T[0].type==="component"&&T[0].content in p&&(S.iteration[T[0].content]=p[T[0].content],g=T[0].content)}}return v}if(a.renderer&&u.render(t,e,v,n,i,r,l),t&&c){c.unpacked||(K(c),c.unpacked=!0);let m=c.children;m&&(m[0].type==="component"&&(S.located[m[0].content]=!0),m[0].first=!0,B(t,u,m,v,void 0,i,r))}return v}var rt={};function Te(t,e,n,o,i){if(S.cancel=!1,!(t in A.list))throw new Error(`Component ${t} not found.`);let r=A.list[t];if(r.lazy&&!(r.lazy in rt)){let c="viewi"+(P.name==="default"?"":"."+P.name),p=P.publicPath+c+"."+r.lazy+(P.minify?".min":"")+".js"+(P.appendVersion?"?"+P.build:"");De(p),ge.postpone(r.lazy,function(){rt[r.lazy]=!0,Te(t,e,n,o,i)});return}let l=S.hydrate,a=S.rootScope;if(o&&a&&r.parent!==S.layout){location.href=o.href;return}if(r.middleware&&!i){let c=r.middleware.length,p=!0,s=-1,u={next:function(y=!0){p=y,s++,p&&s<c?W(r.middleware[s]).run(u):p&&Te(t,e,n,o,!0)}};u.next(!0);return}o&&o.func(o.href,o.forward),S.layout=r.parent,S.lastIteration=S.iteration,S.iteration={},S.scopedContainer={},S.located={},S.rootScope=te(n??document,t,void 0,{},l,!1,e),S.hydrate=!1;for(let c in S.lastIteration)c in S.iteration||(S.lastIteration[c].scope.keep=!1);if(a&&J(a),l)for(let c in Y){let p=Y[c];for(let s=p.target.childNodes.length-1;s>=p.current+1;s--)p.target.childNodes[s].remove();for(let s=p.invalid.length-1;s>=0;s--)p.target.childNodes[p.invalid[s]].remove()}}var Ct=document.createElement("a"),z={link:Ct,scrollTo:null};var Tt=function(t){return z.link.href=t,z.link.pathname},wt=function(t,e=!0){e&&window.history.pushState({href:t},"",t),window.scrollTo(0,0)};function Q(t,e=!0){S.cancel=!0;let n=Tt(t),o=A.router.resolve(n);if(o==null)throw"Can't resolve route for uri: "+n;setTimeout(function(){Te(o.item.action,o.params,void 0,{func:wt,href:t,forward:e})},0)}var ne=class{browser=!0;server=!1;getConfig(){return A.config}redirect(e){Q(e)}navigateBack(){history.back()}getCurrentUrl(){return location.pathname+location.search}getCurrentUrlPath(){return location.pathname}getQueryParams(){return Object.fromEntries(new URLSearchParams(location.search))}};var we=class{onSuccess;onError=null;onAlways=null;result=null;lastError=null;action;constructor(e){this.action=e}error(e){this.onError=e}success(e){this.onSuccess=e}always(e){this.onAlways=e}run(){let e=this;this.action(function(n,o){e.result=n;let i=!1;if(o?(e.lastError=o,e.onError!==null?e.onError(o):i=!0):e.onSuccess(e.result),e.onAlways!=null&&e.onAlways(),i)throw e.lastError})}then(e,n,o){this.onSuccess=e,n&&(this.onError=n),o&&(this.onAlways=o),this.run()}};function it(t){return"Blob"in window&&t instanceof Blob}var X=class t{url;status;statusText;headers={};body=null;constructor(e,n,o,i={},r=null){this.url=e,this.status=n,this.statusText=o,this.headers=i,this.body=r}withUrl(e){var n=this.clone();return n.url=e,n}withStatus(e,n=null){var o=this.clone();return o.status=e,n!==null&&(o.statusText=n),o}withHeaders(e){var n=this.clone();return n.headers={...n.headers,...e},n}withHeader(e,n){var o=this.clone();return o.headers[e]=n,o}withBody(e=null){var n=this.clone();return n.body=e,n}ok(){return this.status>=200&&this.status<300}clone(){var e=new t(this.url,this.status,this.statusText,this.headers,this.body);return e}};function st(t,e,n,o,i){let r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4){let a=r.status,c=r.getResponseHeader("Content-Type"),p=c&&c.indexOf("application/json")===0,u=r.responseText;p&&(u=JSON.parse(r.responseText));let y={},x=r.getAllResponseHeaders();if(x){let m=x.trim().split(/[\r\n]+/);for(let g=0;g<m.length;g++){let f=m[g].split(": "),T=f.shift();if(T){let k=f.join(": ");y[T]=k}}}let v=new X(n,a,"",y,u);t(v)}};let l=o!==null&&typeof o=="object"&&!it(o);if(r.open(e.toUpperCase(),n,!0),l&&r.setRequestHeader("Content-Type","application/json"),i)for(let a in i)if(Array.isArray(i[a]))for(let c=0;c<i[a].length;c++)r.setRequestHeader(a,i[a][c]);else r.setRequestHeader(a,i[a]);o!==null?r.send(l?JSON.stringify(o):o):r.send()}var ke=class t{url;method;headers={};body=null;isExternal;constructor(e,n,o={},i=null){this.url=e,this.method=n,this.headers=o,this.body=i}withMethod(e){var n=this.clone();return n.method=e,n}withUrl(e){var n=this.clone();return n.url=e,n}withHeaders(e){var n=this.clone();return n.headers={...n.headers,...e},n}withHeader(e,n){var o=this.clone();return o.headers[e]=n,o}withBody(e=null){var n=this.clone();return n.body=e,n}clone(){var e=new t(this.url,this.method,this.headers,this.body);return e}markAsExternal(){return this}};var Ie=function(t,e,n){let i=n.length,r=function(c,p){p&&c.status>=200&&c.status<300?e(c.body):e(void 0,c.body?c.body:"Failed")},l=function(c,p){p&&i>-1?n[i].response(c,a):r(c,p)},a={next:function(c){i--,l(c,!0)},reject:function(c){i--,l(c,!1)}};a.next(t)},oe=class t{interceptors=[];request(e,n,o,i){let r=this;return new we(function(a){try{let c=ye(),p=new ke(n,e,i,o),s=-1,u=r.interceptors.length,y=[],x=function(g,d){if(d){let f=g.method+"_"+g.url+"_"+JSON.stringify(g.body);if(f in c.http){let T=JSON.parse(c.http[f]);delete c.http[f];let k=new X(g.url,200,"OK",{},T);Ie(k,a,y);return}else st(function(T){Ie(T,a,y)},g.method,g.url,g.body,g.headers)}else{let f=new X(g.url,0,"Rejected",{},null);Ie(f,a,y)}},v=function(g,d){if(!d){x(g,d);return}if(s<u){let f=W(r.interceptors[s]);y.push(f),f.request(g,m)}else x(g,d)},m={next:function(g){s++,v(g,!0)},reject:function(g){s++,v(g,!1)}};m.next(p)}catch(c){console.error(c),a(void 0,c)}})}get(e,n){return this.request("get",e,null,n)}post(e,n,o){return this.request("post",e,n,o)}withInterceptor(e){let n=new t;return n.interceptors=[...this.interceptors,e],n}};var L={};function Ne(t,e,n=!1,o=!1){let i=document.getElementById("portal_"+t.to+"_end");if(i){let r=L[t.to].current,l=o?i:i.parentElement,a=n?M(l):void 0,c=n?a.current:0,p=Array.prototype.indexOf.call(l.childNodes,i);n&&(a.current=r);let s="default",u=$(l,o,a);if(s in e.slots){let x=e.slots[s];x.node.unpacked||(K(x.node),x.node.unpacked=!0),B(l,x.scope.instance,x.node.children,x.scope,void 0,n,o)}let y=$(l,o,a,u._anchor);if(e.instance._name in S.iteration&&(S.iteration[e.instance._name].slots[s]=y),t.$.anchorNode=y,n){L[t.to].current=a.current;let x=Array.prototype.indexOf.call(l.childNodes,i);a.current=c+x-p}}}var re=class extends E{to;name;_name="Portal";anchorNode;destroy(){if(this.to&&this.anchorNode&&this.anchorNode.previousSibling){for(;this.anchorNode.previousSibling._anchor!==this.anchorNode._anchor;)this.anchorNode.previousSibling.remove();this.anchorNode.previousSibling.remove(),this.anchorNode.remove()}}render(e,n,o,i,r=!1,l=!1,a={}){if(this.name){let c="portal_"+this.name+"_end";if(r){let p=document.getElementById(c);if(p){let s=Array.prototype.indexOf.call(e.childNodes,p);if(s>0){let u=M(e);if(this.name in L||(L[this.name]={}),L[this.name].current=u.current+1,u.current=s,L[this.name].queue){let y=L[this.name].queue;for(let x=0;x<y.length;x++)y[x][0].apply(null,y[x][1]);delete L[this.name].queue}}}}else{let p="portal_"+this.name,s=document.createElement("i"),u=document.createElement("i");s.setAttribute("id",p),u.setAttribute("id",c);let y="display: none !important;";s.setAttribute("style",y),u.setAttribute("style",y),l?e.parentElement.insertBefore(s,e):e.appendChild(s),l?e.parentElement.insertBefore(u,e):e.appendChild(u)}}else if(this.to)if(r)if(this.to in L&&L[this.to].current)Ne(this,o,r,l);else{let c=[Ne,[this,o,r,l]];this.to in L?L[this.to].queue.push(c):L[this.to]={queue:[c]}}else Ne(this,o,!1,!0);else throw new Error("Portal component should have either 'name' or 'to' attribute.")}};function lt(){q.BaseComponent=E,be("HttpClient",oe,()=>new oe),be("Platform",ne,()=>new ne),be("Portal",re,()=>new re)}function at(){document.addEventListener("click",function(t){if(t.defaultPrevented)return;t.target||console.warn('Can not aquire event target at "watchLinks".');let n=t.target;for(;n.parentElement&&n.tagName!=="A";)n=n.parentElement;n.tagName==="A"&&n.href&&n.href.indexOf(location.origin)===0&&(z.scrollTo=null,(!z.link.hash||z.link.pathname!==location.pathname)&&(t.preventDefault(),z.link.hash&&(z.scrollTo=z.link.hash),Q(n.href,!0)))},!1),window.addEventListener("popstate",function(t){t.state?Q(t.state.href,!1):Q(location.href,!1)})}var ct={register:{},version:P.version,build:P.build,name:P.name,publish(t,e){for(let n in e)if(!(n in V)){let o=e[n];o._t==="template"?A.list[o.name]=JSON.parse(o.data):V[n]=o}ge.ready(t)}};window.ViewiApp=window.ViewiApp||{};window.ViewiApp[P.name]=ct;(async()=>{let t=JSON.parse(Re);P.combine||(t=await(await fetch(P.componentsPath)).json()),A.list=t,A.router.setRoutes(t._routes),A.config=t._config;let e=t._meta.boolean.split(",");for(let n=0;n<e.length;n++)A.booleanAttributes[e[n]]=!0;lt(),ct.register={...V,...q,...Le},at(),Q(location.href)})();})();
